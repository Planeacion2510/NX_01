{% extends 'base.html' %}
{% load static %}

{% block title %}{{ empleado.get_nombre_completo }} - Perfil del Empleado{% endblock %}

{% block extra_css %}
<style>
    /* Variables de colores */
    :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        --info-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    /* Header del perfil con efecto glassmorphism */
    .profile-header-modern {
        background: var(--primary-gradient);
        border-radius: 20px;
        padding: 40px;
        margin-bottom: 30px;
        box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3);
        color: white;
        position: relative;
        overflow: hidden;
    }

    .profile-header-modern::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(255,255,255,0.1)" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,144C960,149,1056,139,1152,122.7C1248,107,1344,85,1392,74.7L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
        background-size: cover;
        opacity: 0.3;
    }

    .profile-header-modern > * {
        position: relative;
        z-index: 1;
    }

    /* Avatar grande con efecto */
    .profile-avatar-large {
        width: 140px;
        height: 140px;
        border-radius: 20px;
        object-fit: cover;
        border: 5px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
    }

    .profile-avatar-large:hover {
        transform: scale(1.05) rotate(2deg);
    }

    .avatar-initials-large {
        width: 140px;
        height: 140px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 3rem;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        border: 5px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .profile-name {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 8px;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .profile-title {
        font-size: 1.25rem;
        opacity: 0.95;
        margin-bottom: 15px;
    }

    .profile-badges {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .badge-profile {
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: 600;
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* Botones del header */
    .profile-actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
    }

    .btn-profile {
        padding: 12px 24px;
        border-radius: 12px;
        font-weight: 600;
        border: 2px solid rgba(255, 255, 255, 0.3);
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        color: white;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .btn-profile:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        color: white;
    }

    /* Secciones de información mejoradas */
    .info-card-modern {
        background: white;
        border-radius: 16px;
        padding: 25px;
        margin-bottom: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
    }

    .info-card-modern:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    }

    .info-card-modern.primary { border-left-color: #667eea; }
    .info-card-modern.success { border-left-color: #38ef7d; }
    .info-card-modern.info { border-left-color: #4facfe; }
    .info-card-modern.warning { border-left-color: #ffc107; }
    .info-card-modern.danger { border-left-color: #ff6a00; }

    .info-card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #f1f3f5;
    }

    .info-card-icon {
        width: 45px;
        height: 45px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
    }

    .info-card-icon.primary { background: rgba(102, 126, 234, 0.1); color: #667eea; }
    .info-card-icon.success { background: rgba(56, 239, 125, 0.1); color: #38ef7d; }
    .info-card-icon.info { background: rgba(79, 172, 254, 0.1); color: #4facfe; }
    .info-card-icon.warning { background: rgba(255, 193, 7, 0.1); color: #ffc107; }
    .info-card-icon.danger { background: rgba(255, 106, 0, 0.1); color: #ff6a00; }

    .info-card-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #2b2f3a;
        margin: 0;
    }

    /* Filas de información */
    .info-row-modern {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid #f8f9fa;
    }

    .info-row-modern:last-child {
        border-bottom: none;
    }

    .info-label {
        color: #6c757d;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .info-value {
        color: #2b2f3a;
        font-weight: 600;
        text-align: right;
    }

    /* Timeline mejorada */
    .timeline-modern {
        position: relative;
        padding-left: 30px;
    }

    .timeline-item-modern {
        position: relative;
        padding-bottom: 20px;
    }

    .timeline-item-modern::before {
        content: '';
        position: absolute;
        left: -25px;
        top: 5px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #667eea;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
    }

    .timeline-item-modern::after {
        content: '';
        position: absolute;
        left: -20px;
        top: 17px;
        width: 2px;
        height: calc(100% - 12px);
        background: linear-gradient(to bottom, #667eea, transparent);
    }

    .timeline-item-modern:last-child::after {
        display: none;
    }

    .timeline-content {
        background: #f8f9fa;
        padding: 12px;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .timeline-content:hover {
        background: #e9ecef;
        transform: translateX(5px);
    }

    .timeline-title {
        font-weight: 600;
        color: #2b2f3a;
        margin-bottom: 4px;
    }

    .timeline-date {
        color: #6c757d;
        font-size: 0.875rem;
    }

    /* Alerta de contrato */
    .contract-alert {
        background: var(--info-gradient);
        color: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
    }

    .contract-alert h6 {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 5px;
    }

    .contract-alert small {
        opacity: 0.9;
    }

    /* Contador de vacaciones */
    .vacation-counter {
        text-align: center;
        padding: 30px;
        background: var(--success-gradient);
        color: white;
        border-radius: 16px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(17, 153, 142, 0.3);
    }

    .vacation-number {
        font-size: 4rem;
        font-weight: 700;
        line-height: 1;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .vacation-label {
        font-size: 1rem;
        opacity: 0.95;
        margin-top: 10px;
    }

    /* Badges modernos */
    .badge-status {
        padding: 6px 14px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.75rem;
    }

    .badge-success-modern { background: var(--success-gradient); color: white; }
    .badge-warning-modern { background: var(--warning-gradient); color: white; }
    .badge-info-modern { background: var(--info-gradient); color: white; }

    /* Grid responsivo */
    .profile-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
    }

    /* Animaciones */
    @keyframes slideInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .info-card-modern {
        animation: slideInUp 0.5s ease;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .profile-header-modern {
            padding: 25px;
        }

        .profile-name {
            font-size: 1.75rem;
        }

        .profile-title {
            font-size: 1rem;
        }

        .profile-avatar-large,
        .avatar-initials-large {
            width: 100px;
            height: 100px;
        }

        .avatar-initials-large {
            font-size: 2rem;
        }

        .profile-actions {
            width: 100%;
        }

        .btn-profile {
            flex: 1;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    
    <!-- Header del Perfil -->
    <div class="profile-header-modern">
        <div class="d-flex justify-content-between align-items-start flex-wrap gap-4">
            <div class="d-flex align-items-center gap-4">
                {% if empleado.foto %}
                    <img src="{{ empleado.foto.url }}" 
                         alt="{{ empleado.get_nombre_completo }}" 
                         class="profile-avatar-large">
                {% else %}
                    <div class="avatar-initials-large">
                        {{ empleado.primer_nombre.0 }}{{ empleado.primer_apellido.0 }}
                    </div>
                {% endif %}
                
                <div>
                    <h1 class="profile-name">{{ empleado.get_nombre_completo }}</h1>
                    <p class="profile-title">{{ empleado.cargo }} • {{ empleado.area }}</p>
                    <div class="profile-badges">
                        {% if empleado.sede %}
                        <span class="badge-profile">
                            <i class="bi bi-building"></i> {{ empleado.sede }}
                        </span>
                        {% endif %}
                        <span class="badge-profile">
                            <i class="bi bi-person-badge"></i> {{ empleado.numero_documento }}
                        </span>
                        <span class="badge-profile {% if empleado.estado == 'activo' %}bg-success{% endif %}">
                            <i class="bi bi-circle-fill"></i> {{ empleado.get_estado_display }}
                        </span>
                    </div>
                </div>
            </div>

            <div class="profile-actions">
                <a href="{% url 'talento_humano:editar_empleado' empleado.pk %}" class="btn-profile">
                    <i class="bi bi-pencil-fill"></i> Editar Perfil
                </a>
                <a href="{% url 'talento_humano:generar_certificacion_empleado' empleado.pk %}" class="btn-profile">
                    <i class="bi bi-file-earmark-pdf-fill"></i> Certificación
                </a>
                <a href="{% url 'talento_humano:lista_empleados' %}" class="btn-profile">
                    <i class="bi bi-arrow-left-circle-fill"></i> Volver
                </a>
            </div>
        </div>
    </div>

    <!-- Grid de Información -->
    <div class="row">
        <!-- Columna Izquierda -->
        <div class="col-lg-4">
            <!-- Información Personal -->
            <div class="info-card-modern primary">
                <div class="info-card-header">
                    <div class="info-card-icon primary">
                        <i class="bi bi-person-fill"></i>
                    </div>
                    <h5 class="info-card-title">Información Personal</h5>
                </div>
                <div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-calendar3"></i> Fecha de Nacimiento
                        </span>
                        <span class="info-value">{{ empleado.fecha_nacimiento|date:"d/m/Y"|default:"N/A" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-hourglass-split"></i> Edad
                        </span>
                        <span class="info-value">
                            {% if empleado.fecha_nacimiento %}{{ empleado.fecha_nacimiento|timesince }}{% else %}N/A{% endif %}
                        </span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-gender-ambiguous"></i> Género
                        </span>
                        <span class="info-value">{{ empleado.get_genero_display|default:"N/A" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-heart-fill"></i> Estado Civil
                        </span>
                        <span class="info-value">{{ empleado.get_estado_civil_display|default:"N/A" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-geo-alt-fill"></i> Lugar de Expedición
                        </span>
                        <span class="info-value">{{ empleado.lugar_expedicion|default:"N/A" }}</span>
                    </div>
                </div>
            </div>

            <!-- Contacto -->
            <div class="info-card-modern info">
                <div class="info-card-header">
                    <div class="info-card-icon info">
                        <i class="bi bi-telephone-fill"></i>
                    </div>
                    <h5 class="info-card-title">Información de Contacto</h5>
                </div>
                <div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-phone-fill"></i> Celular
                        </span>
                        <span class="info-value">
                            <a href="tel:{{ empleado.celular }}" class="text-decoration-none">
                                {{ empleado.celular|default:"N/A" }}
                            </a>
                        </span>
                    </div>
                    {% if empleado.telefono_fijo %}
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-telephone-fill"></i> Teléfono Fijo
                        </span>
                        <span class="info-value">{{ empleado.telefono_fijo }}</span>
                    </div>
                    {% endif %}
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-envelope-fill"></i> Email Personal
                        </span>
                        <span class="info-value">
                            <a href="mailto:{{ empleado.email_personal }}" class="text-decoration-none">
                                {{ empleado.email_personal|default:"N/A" }}
                            </a>
                        </span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-envelope-at-fill"></i> Email Corporativo
                        </span>
                        <span class="info-value">
                            <a href="mailto:{{ empleado.email_corporativo }}" class="text-decoration-none">
                                {{ empleado.email_corporativo|default:"N/A" }}
                            </a>
                        </span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-house-fill"></i> Dirección
                        </span>
                        <span class="info-value">{{ empleado.direccion|default:"N/A" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-pin-map-fill"></i> Ciudad
                        </span>
                        <span class="info-value">{{ empleado.ciudad|default:"N/A" }}</span>
                    </div>
                    {% if empleado.barrio %}
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-signpost-fill"></i> Barrio
                        </span>
                        <span class="info-value">{{ empleado.barrio }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Contacto de Emergencia -->
            {% if empleado.contacto_emergencia_nombre %}
            <div class="info-card-modern danger">
                <div class="info-card-header">
                    <div class="info-card-icon danger">
                        <i class="bi bi-exclamation-triangle-fill"></i>
                    </div>
                    <h5 class="info-card-title">Contacto de Emergencia</h5>
                </div>
                <div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-person-fill"></i> Nombre
                        </span>
                        <span class="info-value">{{ empleado.contacto_emergencia_nombre }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-people-fill"></i> Parentesco
                        </span>
                        <span class="info-value">{{ empleado.contacto_emergencia_parentesco }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-telephone-fill"></i> Teléfono
                        </span>
                        <span class="info-value">
                            <a href="tel:{{ empleado.contacto_emergencia_telefono }}" class="text-decoration-none">
                                {{ empleado.contacto_emergencia_telefono }}
                            </a>
                        </span>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Columna Central -->
        <div class="col-lg-4">
            <!-- Información Laboral -->
            <div class="info-card-modern success">
                <div class="info-card-header">
                    <div class="info-card-icon success">
                        <i class="bi bi-briefcase-fill"></i>
                    </div>
                    <h5 class="info-card-title">Información Laboral</h5>
                </div>
                <div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-calendar-check-fill"></i> Fecha de Ingreso
                        </span>
                        <span class="info-value">{{ empleado.fecha_ingreso|date:"d/m/Y" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-clock-history"></i> Antigüedad
                        </span>
                        <span class="info-value text-primary fw-bold">{{ antiguedad.texto }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-award-fill"></i> Cargo
                        </span>
                        <span class="info-value">{{ empleado.cargo }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-diagram-3-fill"></i> Área
                        </span>
                        <span class="info-value">{{ empleado.area }}</span>
                    </div>
                    {% if empleado.jefe_inmediato %}
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-person-badge-fill"></i> Jefe Inmediato
                        </span>
                        <span class="info-value">
                            <a href="{% url 'talento_humano:detalle_empleado' empleado.jefe_inmediato.pk %}" 
                               class="text-decoration-none">
                                {{ empleado.jefe_inmediato.get_nombre_completo }}
                            </a>
                        </span>
                    </div>
                    {% endif %}
                    {% if empleado.sede %}
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-building"></i> Sede
                        </span>
                        <span class="info-value">{{ empleado.sede }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Salario -->
            <div class="info-card-modern warning">
                <div class="info-card-header">
                    <div class="info-card-icon warning">
                        <i class="bi bi-cash-stack"></i>
                    </div>
                    <h5 class="info-card-title">Información Salarial</h5>
                </div>
                <div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-currency-dollar"></i> Salario Básico
                        </span>
                        <span class="info-value text-success fw-bold">
                            ${{ empleado.salario_basico|floatformat:0 }}
                        </span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-bus-front-fill"></i> Auxilio Transporte
                        </span>
                        <span class="info-value">
                            {% if empleado.aplica_auxilio_transporte %}
                                <span class="badge-status badge-success-modern">Sí</span>
                            {% else %}
                                <span class="badge-status badge-secondary">No</span>
                            {% endif %}
                        </span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-star-fill"></i> Salario Integral
                        </span>
                        <span class="info-value">
                            {% if empleado.salario_integral %}
                                <span class="badge-status badge-info-modern">Sí</span>
                            {% else %}
                                <span class="badge-status badge-secondary">No</span>
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Seguridad Social -->
            <div class="info-card-modern primary">
                <div class="info-card-header">
                    <div class="info-card-icon primary">
                        <i class="bi bi-shield-fill-check"></i>
                    </div>
                    <h5 class="info-card-title">Seguridad Social</h5>
                </div>
                <div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-hospital-fill"></i> EPS
                        </span>
                        <span class="info-value">{{ empleado.eps.nombre|default:"No asignada" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-piggy-bank-fill"></i> AFP
                        </span>
                        <span class="info-value">{{ empleado.afp.nombre|default:"No asignada" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-shield-fill-plus"></i> ARL
                        </span>
                        <span class="info-value">{{ empleado.arl.nombre|default:"No asignada" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-gift-fill"></i> Caja Compensación
                        </span>
                        <span class="info-value">{{ empleado.caja_compensacion.nombre|default:"No asignada" }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Columna Derecha -->
        <div class="col-lg-4">
            <!-- Contrato Actual -->
            {% if contrato_actual %}
            <div class="info-card-modern info">
                <div class="contract-alert">
                    <h6>{{ contrato_actual.get_tipo_display }}</h6>
                    <small>Contrato No. {{ contrato_actual.numero_contrato }}</small>
                </div>
                <div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-calendar-event"></i> Fecha Inicio
                        </span>
                        <span class="info-value">{{ contrato_actual.fecha_inicio|date:"d/m/Y" }}</span>
                    </div>
                    {% if contrato_actual.fecha_fin %}
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-calendar-x"></i> Fecha Fin
                        </span>
                        <span class="info-value">{{ contrato_actual.fecha_fin|date:"d/m/Y" }}</span>
                    </div>
                    <div class="info-row-modern">
                        <span class="info-label">
                            <i class="bi bi-hourglass-split"></i> Días Restantes
                        </span>
                        <span class="info-value">
                            {% if contrato_actual.dias_para_vencer <= 30 %}
                                <span class="badge-status badge-warning-modern">
                                    {{ contrato_actual.dias_para_vencer }} días
                                </span>
                            {% else %}
                                {{ contrato_actual.dias_para_vencer }} días
                            {% endif %}
                        </span>
                    </div>
                    {% endif %}
                </div>
                <a href="{% url 'talento_humano:lista_contratos' %}?empleado={{ empleado.pk }}" 
                   class="btn btn-primary w-100 mt-3">
                    <i class="bi bi-file-text-fill"></i> Ver Historial de Contratos
                </a>
            </div>
            {% endif %}

            <!-- Vacaciones -->
            <div class="info-card-modern success">
                <div class="vacation-counter">
                    <div class="vacation-number">{{ dias_vacaciones_disponibles }}</div>
                    <div class="vacation-label">
                        <i class="bi bi-umbrella-fill"></i> Días de Vacaciones Disponibles
                    </div>
                </div>
                
                {% if vacaciones_recientes %}
                <div class="info-card-header">
                    <div class="info-card-icon success">
                        <i class="bi bi-calendar-week"></i>
                    </div>
                    <h6 class="info-card-title mb-0">Últimas Solicitudes</h6>
                </div>
                <div class="timeline-modern mt-3">
                    {% for vacacion in vacaciones_recientes %}
                    <div class="timeline-item-modern">
                        <div class="timeline-content">
                            <div class="d-flex justify-content-between align-items-start">
                                <div class="timeline-title">
                                    {{ vacacion.fecha_inicio|date:"d/m/Y" }} - {{ vacacion.fecha_fin|date:"d/m/Y" }}
                                </div>
                                <span class="badge-status {% if vacacion.aprobada %}badge-success-modern{% else %}badge-warning-modern{% endif %}">
                                    {% if vacacion.aprobada %}Aprobada{% else %}Pendiente{% endif %}
                                </span>
                            </div>
                            <div class="timeline-date">
                                <i class="bi bi-calendar3"></i> {{ vacacion.dias_habiles }} días hábiles
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>

            <!-- Capacitaciones -->
            {% if capacitaciones %}
            <div class="info-card-modern primary">
                <div class="info-card-header">
                    <div class="info-card-icon primary">
                        <i class="bi bi-mortarboard-fill"></i>
                    </div>
                    <h5 class="info-card-title">Capacitaciones Recientes</h5>
                </div>
                <div class="timeline-modern">
                    {% for inscripcion in capacitaciones %}
                    <div class="timeline-item-modern">
                        <div class="timeline-content">
                            <div class="timeline-title">{{ inscripcion.capacitacion.nombre }}</div>
                            <div class="timeline-date">
                                <i class="bi bi-calendar3"></i> {{ inscripcion.capacitacion.fecha_programada|date:"d/m/Y" }}
                                {% if inscripcion.asistio %}
                                    <span class="badge-status badge-success-modern ms-2">Asistió</span>
                                {% endif %}
                                {% if inscripcion.calificacion %}
                                    <span class="badge-status badge-info-modern ms-1">
                                        <i class="bi bi-star-fill"></i> {{ inscripcion.calificacion }}/5
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Evaluaciones -->
            {% if evaluaciones %}
            <div class="info-card-modern warning">
                <div class="info-card-header">
                    <div class="info-card-icon warning">
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <h5 class="info-card-title">Evaluaciones de Desempeño</h5>
                </div>
                <div class="timeline-modern">
                    {% for evaluacion in evaluaciones %}
                    <div class="timeline-item-modern">
                        <div class="timeline-content">
                            <div class="timeline-title">Evaluación {{ evaluacion.periodo }}</div>
                            <div class="timeline-date">
                                <i class="bi bi-calendar3"></i> {{ evaluacion.fecha_evaluacion|date:"d/m/Y" }}
                                <span class="badge-status badge-warning-modern ms-2">
                                    <i class="bi bi-award-fill"></i> {{ evaluacion.calificacion_promedio }}/5
                                </span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Observaciones -->
    {% if empleado.observaciones %}
    <div class="row mt-3">
        <div class="col-12">
            <div class="info-card-modern primary">
                <div class="info-card-header">
                    <div class="info-card-icon primary">
                        <i class="bi bi-chat-left-text-fill"></i>
                    </div>
                    <h5 class="info-card-title">Observaciones</h5>
                </div>
                <p class="mb-0" style="line-height: 1.8;">{{ empleado.observaciones }}</p>
            </div>
        </div>
    </div>
    {% endif %}

</div>
{% endblock %}

{% block extra_js %}
<script>
// Animación de entrada para las tarjetas
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.info-card-modern');
    cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
    });

    // Efecto hover en timeline items
    const timelineItems = document.querySelectorAll('.timeline-content');
    timelineItems.forEach(item => {
        item.addEventListener('mouseenter', function() {
            this.style.transform = 'translateX(5px)';
        });
        item.addEventListener('mouseleave', function() {
            this.style.transform = 'translateX(0)';
        });
    });
});
</script>
{% endblock %}