{% extends 'base.html' %}
{% load static %}

{% block title %}Empleados | NexusOne{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="section-title text-center mb-4">
        <i class="fas fa-users"></i> Lista de Empleados
    </h2>
    <p class="text-muted text-center mb-5">Gestione, edite o consulte los empleados registrados</p>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="{% url 'talento_humano:crear_empleado' %}" class="btn-modern">
            <i class="fas fa-user-plus"></i> Nuevo Empleado
        </a>
        <form method="get" class="d-flex">
            <input type="text" name="q" class="form-control me-2" placeholder="Buscar empleado..." value="{{ request.GET.q }}">
            <button class="btn-modern-outline" type="submit"><i class="fas fa-search"></i></button>
        </form>
    </div>

    <div class="card-modern">
        <div class="card-body-modern">
            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>Foto</th>
                            <th>Nombre</th>
                            <th>Cargo</th>
                            <th>√Årea</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for empleado in empleados %}
                        <tr>
                            <td>
                                {% if empleado.foto %}
                                <img src="{{ empleado.foto.url }}" class="rounded-circle" width="45" height="45">
                                {% else %}
                                <div class="avatar-initials bg-primary text-white">{{ empleado.primer_nombre.0 }}{{ empleado.primer_apellido.0 }}</div>
                                {% endif %}
                            </td>
                            <td>{{ empleado.get_nombre_completo }}</td>
                            <td>{{ empleado.cargo }}</td>
                            <td>{{ empleado.area }}</td>
                            <td>
                                <span class="badge {% if empleado.estado == 'activo' %}bg-success{% else %}bg-secondary{% endif %}">
                                    {{ empleado.estado|title }}
                                </span>
                            </td>
                            <td>
                                <a href="{% url 'talento_humano:perfil_empleado' empleado.id %}" class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i></a>
                                <a href="{% url 'talento_humano:editar_empleado' empleado.id %}" class="btn btn-sm btn-outline-warning"><i class="fas fa-edit"></i></a>
                                <a href="{% url 'talento_humano:eliminar_empleado' empleado.id %}" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr><td colspan="6" class="text-center text-muted">No hay empleados registrados.</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
.card-modern {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    overflow: hidden;
}
.card-body-modern { padding: 25px; }
.btn-modern, .btn-modern-outline {
    border-radius: 10px;
    font-weight: 600;
    padding: 8px 16px;
}
.btn-modern {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border: none;
}
.btn-modern-outline {
    background: white;
    color: #007bff;
    border: 2px solid #007bff;
}
.btn-modern-outline:hover {
    background: #007bff;
    color: white;
}
.avatar-initials {
    width: 45px; height: 45px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-weight: bold;
}
</style>
{% endblock %}
