{% extends 'base.html' %}
{% block content %}

<style>
  .container {
    max-width: 800px;
    margin-top: 40px;
  }

  h2 {
    font-weight: bold;
    margin-bottom: 20px;
  }

  form {
    background-color: #ffffff;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
  }

  label {
    font-weight: 600;
  }

  .btn {
    border-radius: 8px;
    font-weight: 600;
    padding: 8px 16px;
  }

  .btn-primary {
    background-color: #0066cc;
    border: none;
  }

  .btn-primary:hover {
    background-color: #004999;
  }

  .btn-secondary {
    background-color: #6c757d;
    border: none;
  }

  .btn-secondary:hover {
    background-color: #565e64;
  }

  .list-group-item a {
    text-decoration: none;
    color: #007bff;
  }

  .list-group-item a:hover {
    text-decoration: underline;
  }

  .list-group-item .btn-sm {
    padding: 2px 8px;
  }

  hr {
    margin-top: 30px;
    margin-bottom: 15px;
  }

  .text-muted {
    font-style: italic;
  }
</style>

<div class="container">
  <h2>{% if orden %}Editar Orden #{{ orden.id }}{% else %}Nueva Orden{% endif %}</h2>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}

    <div class="mb-3">
      <label>üìÇ Subir nuevos documentos:</label>
      <input type="file" name="documentos" multiple class="form-control" />
    </div>

    <div class="d-flex justify-content-between mt-4">
      <button type="submit" class="btn btn-primary">üíæ Guardar</button>
      <a href="{% url 'lista_ordenes' %}" class="btn btn-secondary">‚¨ÖÔ∏è Volver</a>
    </div>
  </form>

  {% if documentos %}
  <hr />
  <h4>üìÅ Documentos actuales:</h4>
  <ul class="list-group">
    {% for doc in documentos %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <a href="{{ doc.archivo.url }}" target="_blank">
        {{ doc.archivo.name|cut:"ordenes/" }}
      </a>
      <a
        href="{% url 'eliminar_documento' doc.id %}"
        class="btn btn-danger btn-sm"
        onclick="return confirm('¬øEliminar este documento?')"
      >üóëÔ∏è</a>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p class="text-muted mt-3">No hay documentos guardados.</p>
  {% endif %}
</div>

{% endblock %}
